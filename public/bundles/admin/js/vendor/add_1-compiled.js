var vendorsToImport={},responseRecords={};$.fn.modalInsert=function(){console.log("modalInsert");var a="";$(this).find("tbody").find("tr").remove();if(1<=Object.keys(vendorsToImport).length){for(key in responseRecords)a+="<tr><td><p><strong>"+responseRecords[key].name+"</strong><br/>AsiNumber: "+responseRecords[key].number+'</strong><br/></p></td><td><button class="btn btn-danger removeRecord" asi_number="'+responseRecords[key].number+'">Remove</button></td></tr>';$(this).find("tbody").append(a)}};
$(window).delegate(vendorsToImport,"change",function(){console.log("vendorsToImport changed");$(".selectedCount").html(Object.keys(vendorsToImport).length);$("#previewTable").modalInsert()});
$("form#search").on("submit",function(a){a.preventDefault();var d=$("#resultsContainer"),c="",a={q:"asi:"+$.trim($(this).closest("form").find(".searchInput").val()),rpp:40};$.getJSON(asiURL+"supplier/search",a,function(a){d.find("table").find("tbody").find("tr").remove();for(var a=a.Results,b=0;b<=a.length-1;b++)responseRecords[a[b].AsiNumber]={id:a[b].Id,name:a[b].Name,number:a[b].AsiNumber},c+='<tr><td><input asi_number="'+a[b].AsiNumber+'" class="vendorImports" name="vendorImports[]" type="checkbox"/></td><td><p><strong>'+
a[b].Name+"</strong><br/>AsiNumber: "+a[b].AsiNumber+"</strong><br/></p></td></tr>";d.find("table").find("tbody").append(c)})});$("html").delegate(".vendorImports","change",function(){var a=parseInt($(this).attr("asi_number"));switch($(this).is(":checked")){case !0:vendorsToImport[a]=responseRecords[a].id;break;case !1:delete vendorsToImport[a],$.grep(vendorsToImport)}});$("html").delegate(".importSelected","click",function(a){a.preventDefault()});$("html").delegate(".viewSelected","click",function(a){a.preventDefault()});
$("#previewTable").click(".removeRecord",function(a){a.preventDefault();console.log(".removeRecord clicked");a=parseInt($(this).attr("asi_number"));console.log("Before");console.log(vendorsToImport);console.log("Being Delete");console.log(delete vendorsToImport[a]);console.log("End Delete");$.grep(vendorsToImport);console.log(vendorsToImport);$("#previewTable").modalInsert()});
